<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit Doctor Profile</title>
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css}"
          rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <div th:replace="doctor/doctor_navbar :: body"></div>
    <div class="container">

        <h2>Edit Doctor Profile</h2>
        <form th:action="@{/doctors/profile-update}" method="post" th:object="${doctor}">


            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" th:field="*{name}" readonly />
            </div>

            <div class="form-group">
                <label for="specialization">Specialization:</label>
                <input type="text" id="specialization" th:field="*{specialization}" required />
            </div>

            <div class="form-group">
                <label for="contactNumber">Contact Number:</label>
                <input type="text" id="contactNumber" th:field="*{contactNumber}" required />
            </div>
<!--            <div class="form-group">-->
<!--                <label for="availabilitySchedule">Availability Schedule:</label>-->
<!--                <textarea id="availabilitySchedule" th:field="*{availabilitySchedule}" rows="4" cols="50" required></textarea>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="availabilitySchedule">Availability Schedule:</label>-->
<!--                <textarea id="availabilitySchedule" th:field="*{availabilitySchedule}" rows="6" cols="60" placeholder="e.g., Monday: 09:00-12:00, 14:00-17:00&#10;Tuesday: 10:00-13:00" required></textarea>-->
<!--            </div>-->
<!--            <div id="schedule-container">-->
<!--                <label>Availability Schedule:</label>-->
<!--                <div class="day-schedule">-->
<!--                    <label>Day:</label>-->
<!--                    <select>-->
<!--                        <option>Monday</option>-->
<!--                        <option>Tuesday</option>-->
<!--                        <option>Wednesday</option>-->
<!--                        <option>Thursday</option>-->
<!--                        <option>Friday</option>-->
<!--                        <option>Saturday</option>-->
<!--                        <option>Sunday</option>-->
<!--                    </select>-->
<!--                    <label>From:</label>-->
<!--                    <input type="time" />-->
<!--                    <label>To:</label>-->
<!--                    <input type="time" />-->
<!--                    <button type="button" onclick="addSchedule()">Add</button>-->
<!--                </div>-->
<!--            </div>-->
<!--            <textarea id="availabilitySchedule" name="availabilitySchedule" th:field="*{availabilitySchedule}" rows="6" cols="60"></textarea>-->

<!--            <script>-->
<!--                function addSchedule() {-->
<!--                    const day = document.querySelector("select").value;-->
<!--                    const from = document.querySelector("input[type='time']").value;-->
<!--                    const to = document.querySelectorAll("input[type='time']")[1].value;-->
<!--                    const textarea = document.getElementById("availabilitySchedule");-->
<!--                    textarea.value += `${day}: ${from}-${to}\n`;-->
<!--                }-->
<!--            </script>-->


            <div id="schedule-container">
                <label>Availability Schedule:</label>
                <div class="day-schedule">
                    <label>Date:</label>
                    <input type="date" id="schedule-date" />

<!--                    <label>Day:</label>-->
<!--                    <select id="schedule-day">-->
<!--                        <option>Monday</option>-->
<!--                        <option>Tuesday</option>-->
<!--                        <option>Wednesday</option>-->
<!--                        <option>Thursday</option>-->
<!--                        <option>Friday</option>-->
<!--                        <option>Saturday</option>-->
<!--                        <option>Sunday</option>-->
<!--                    </select>-->

                    <label>From:</label>
                    <input type="time" id="schedule-from" />

                    <label>To:</label>
                    <input type="time" id="schedule-to" />

                    <button type="button" onclick="addSchedule()">Add</button>
                </div>
            </div>

            <textarea id="availabilitySchedule" name="availabilitySchedule" th:field="*{availabilitySchedule}" rows="6" cols="60"></textarea>

            <script>
                function addSchedule() {
                    const date = document.getElementById("schedule-date").value;
                    const from = document.getElementById("schedule-from").value;
                    const to = document.getElementById("schedule-to").value;
                    const textarea = document.getElementById("availabilitySchedule");

                    if (date  && from && to) {
                        textarea.value += `${date} : ${from} - ${to}\n`;
                    } else {
                        alert("Please fill in all fields.");
                    }
                }
            </script>
            <br>

            <button type="submit">Update Profile</button>

            <br>
            <a th:href="@{/doctors/}">Return back</a>
        </form>

        <div th:if="${message}">
            <p th:text="${message}" style="color: green;"></p>
        </div>
    </div>

    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js}"
            crossorigin="anonymous"></script>
</body>
</html>
